# Synchronization

* 쓰레드는 address space 를 공유한다.
* 따라서 한 쓰레드가 변수의 값을 변경하면 다른 쓰레드도 그 값을 보게된다.
* 만약 두개의 쓰레드가 같은 변수의 값을 동시에 변경하면 어떻게 될까?

### e.g., 계좌에서 돈 인출하기

* 서로 다른 ATM 에서 20만원이 있는 같은 계좌에 동시에 접근하여 돈을 인출한다.
* 'A' ATM 에서 계좌에서 5만원을 뺀 값을 계좌에 대입하는 순간 'B' ATM 에서 preemtion 한다.
* 계좌 잔액상태가 아직 20만원 이기 때문에 'B' ATM 에서 5만원을 인출하고 현재 계좌 잔액에 15만원을 대입한다.
* 'A' ATM 에서도 마찬가지로 현재 계좌 잔액에 15만원을 대입한다.

## Synchronization Problem

* 둘 이상의 쓰레드가 공유 메모리에 동시에 접근하여 고치면 race condition 이 발생한다.
* 결과값을 예상할 수 없게 된다.
* 디버깅이 어렵다. (불확정성의 원리 - Heisenbugs)
* concurrency 를 제어하는 것이 synchronization 이다.

